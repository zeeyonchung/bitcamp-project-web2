
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
boby {
	font-family: '맑은 고딕', sans-serif;
}

#sidebar {
	color: white;
	padding: 10px 5px;
	float: left;
	margin: 5px 5px 5px 0px;
}

#sidebar a {
	color: white;
	text-decoration: none;
}

#content {
	margin-left: 200px;
}

#footer {
	clear: left;
}
</style>
<meta charset='UTF-8'>
<title>학생관리-목록</title>
</head>
<body>

	<div id='header'
		style='background-color: gray; height: 60px; position: relative;'>
	</div>
	<div id='sidebar'
		style='background-color: Navy; width: 180px; height: 400px;'></div>

	<div id="content">
		<h1>학생 정보</h1>
		<a id='new-btn' href='#'>추가</a><br>
		<table id='list-table' border='1'>
			<thead>
				<tr>
					<th>회원번호</th>
					<th>이름</th>
					<th>전화</th>
					<th>재직여부</th>
					<th>최종학력</th>
					<th>학교명</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>


	<div id='footer' style='background-color: gray; height: 28px;'></div>



  <script src="../js/bit.js"></script>
  <script src="../js/common.js"></script>

	<script>
  
  //학생 목록 가져와서 tr 태그 붙이기
  get("list.json", function(result) {
	  //result JSON 문자열을 자바스크립트 객체로 만든다
	  var ajaxResult = JSON.parse(result);
	  var status = ajaxResult.status;
	  
	  if (status != "success") {
		  return;
	  }
	  var list = ajaxResult.data;
	  var tbody = document.querySelector('#list-table > tbody');
	  
	  for (var student of list) {
		  var tr = document.createElement("tr");
		  tr.innerHTML = "<tr><td>" + 
		    student.memberNo + "</td><td><a class='name-link' href='#' data-no='" + 
		    student.memberNo +"'>" + 
		    student.name + "</a></td><td>" + 
		    student.tel + "</td><td>" + 
		    student.working + "</td><td>" +
		    student.grade + "</td><td>" +
		    student.schoolName + "</td></tr>";
		  tbody.appendChild(tr);
	  }
	  var al = document.querySelectorAll('.name-link');
	  for (var a of al) {
		  a.onclick = function(event) {
			  event.preventDefault();
			  location.href = 'view.html?memberNo=' + this.getAttribute("data-no");
		  }
	  }
  });
  
  
  document.querySelector('#new-btn').onclick = function(event) {
	  event.preventDefault();
	  location.href = 'view.html';
  };
	</script>
</body>
</html>
